# PostgreSQL Secrets Template
# Copy to secrets.yaml and fill in base64 encoded values
# NEVER commit secrets.yaml to git!
#
# Generate passwords:
#   openssl rand -base64 32 | tr -d '\n' | base64
#
apiVersion: v1
kind: Secret
metadata:
  name: postgresql-secrets
  namespace: qawave
  labels:
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/component: database
type: Opaque
data:
  # PostgreSQL admin (postgres) password
  # echo -n 'your-admin-password' | base64
  postgres-password: CHANGEME

  # QAWave application user password
  # echo -n 'your-app-password' | base64
  password: CHANGEME

  # Replication password (if using replicas)
  # echo -n 'your-replication-password' | base64
  replication-password: CHANGEME
---
# Connection string secret for application use
apiVersion: v1
kind: Secret
metadata:
  name: postgresql-connection
  namespace: qawave
  labels:
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/component: database
type: Opaque
stringData:
  # R2DBC connection URL for Spring WebFlux
  # Format: r2dbc:postgresql://host:port/database
  R2DBC_URL: r2dbc:postgresql://postgresql.qawave.svc.cluster.local:5432/qawave

  # Standard JDBC URL (for migrations, etc.)
  JDBC_URL: jdbc:postgresql://postgresql.qawave.svc.cluster.local:5432/qawave

  # Individual components
  DB_HOST: postgresql.qawave.svc.cluster.local
  DB_PORT: "5432"
  DB_NAME: qawave
  DB_USER: qawave
  # Password reference - application should read from postgresql-secrets
